<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Mean square prediction error — mod_error • mosaicModel</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Mean square prediction error — mod_error" />

<meta property="og:description" content="Compares model predictions to the actual value of the response variable.
To do this, testing data must be provided with both the input variables and the
corresponding response variable. The measure calculated for a quantitative response
variable is the mean square prediction error (MSPE).
For categorical response variables, an analog of MSPE can be calculated (see details)
but by default, a mean log-likelihood (mean per case) is computed instead." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mosaicModel</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Basics.html">Using mosaicModel</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ProjectMOSAIC/mosaicModel">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Mean square prediction error</h1>
    <small class="dont-index">Source: <a href='https://github.com/ProjectMOSAIC/mosaicModel/blob/master/R/mod_error.R'><code>R/mod_error.R</code></a></small>
    <div class="hidden name"><code>mod_error.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Compares model predictions to the actual value of the response variable.
To do this, testing data must be provided with <em>both</em> the input variables and the
corresponding response variable. The measure calculated for a quantitative response
variable is the mean square prediction error (MSPE).
For categorical response variables, an analog of MSPE can be calculated (see details)
but by default, a mean log-likelihood (mean per case) is computed instead.</p>
    
    </div>

    <pre class="usage"><span class='fu'>mod_error</span>(<span class='no'>model</span>, <span class='no'>testdata</span>, <span class='kw'>error_type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"default"</span>, <span class='st'>"mse"</span>, <span class='st'>"sse"</span>, <span class='st'>"mad"</span>,
  <span class='st'>"LL"</span>, <span class='st'>"mLL"</span>, <span class='st'>"dev"</span>, <span class='st'>"class_error"</span>))</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p>The model whose prediction error is to be estimated.</p></td>
    </tr>
    <tr>
      <th>testdata</th>
      <td><p>A data frame giving both model inputs and the actual value of the response
variable. If no testing data is provided, the training data will be used and a warning issued.</p></td>
    </tr>
    <tr>
      <th>error_type</th>
      <td><p>The measure of error you are interested in. By default, this is mean-square error for
regression models and log-likelihood for classifiers. The choices are:</p><ul>
<li><p><code>"mse"</code> -- mean square error</p></li>
<li><p><code>"sse"</code> -- sum of square errors</p></li>
<li><p><code>"mad"</code> -- mean absolute deviation</p></li>
<li><p><code>"LL"</code>  -- log-likelihood</p></li>
<li><p><code>"mLL"</code> -- mean log-likehood (per case in the testing data)</p></li>
<li><p><code>"dev"</code> -- deviance. (Plus a constant, which is often zero. The constant is fixed for a given testing data set,
regardless of the model. So differences between deviances of two models are correct.)</p></li>
<li><p><code>"class_error"</code> -- classification error rate.</p></li>
</ul></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>When the response variable is categorical, the model
(called a 'classifier' in such situations) must be capable of
computing <em>probabilities</em> for each output rather than just a bare category.
This is true for many commonly encountered classifier model architectures.</p>
<p>The analog of the mean squared error for classifiers is the mean of (1-p)^2, where p is the
probability assigned by the model to the actual output. This is a rough approximation
to the log-likelihood. By default, the log-likelihood will be calculated, but for pedagogical
reasons you may prefer (1-p)^2, in which case set <code>error_type = "mse"</code>. Classifiers can assign a probability
of zero to the actual output, in which case the log-likelihood is <code>-Inf</code>. The <code>"mse"</code> error type avoids this.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>mod</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>mpg</span> ~ <span class='no'>hp</span> + <span class='no'>wt</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>)
<span class='fu'>mod_error</span>(<span class='no'>mod</span>) <span class='co'># In-sample prediction error.</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Calculating error from training data.</span></div><div class='output co'>#&gt;      mse 
#&gt; 6.095242 </div><span class='co'># NOT RUN {</span>
<span class='no'>classifier</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>rpart</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/rpart/topics/rpart'>rpart</a></span>(<span class='no'>Species</span> ~ <span class='no'>.</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>iris</span>)
<span class='fu'>mod_error</span>(<span class='no'>classifier</span>)
<span class='fu'>mod_error</span>(<span class='no'>classifier</span>, <span class='kw'>error_type</span> <span class='kw'>=</span> <span class='st'>"LL"</span>)
<span class='co'># More typically</span>
<span class='no'>inds</span> <span class='kw'>&lt;-</span> <span class='fu'>sample</span>(<span class='fl'>1</span>:<span class='fu'>nrow</span>(<span class='no'>iris</span>), <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>100</span>)
<span class='no'>Training</span> <span class='kw'>&lt;-</span> <span class='no'>iris</span>[<span class='no'>inds</span>, ]
<span class='no'>Testing</span>  <span class='kw'>&lt;-</span> <span class='no'>iris</span>[ - <span class='no'>inds</span>, ]
<span class='no'>classifier</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>rpart</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/rpart/topics/rpart'>rpart</a></span>(<span class='no'>Species</span> ~ <span class='no'>.</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>Training</span>)
<span class='co'># This may well assign zero probability to events that appeared in the</span>
<span class='co'># Testing data</span>
<span class='fu'>mod_error</span>(<span class='no'>classifier</span>, <span class='kw'>testdata</span> <span class='kw'>=</span> <span class='no'>Testing</span>)
<span class='fu'>mod_error</span>(<span class='no'>classifier</span>, <span class='kw'>testdata</span> <span class='kw'>=</span> <span class='no'>Testing</span>, <span class='kw'>error_type</span> <span class='kw'>=</span> <span class='st'>"mse"</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Kaplan Daniel, Pruim Randall.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

